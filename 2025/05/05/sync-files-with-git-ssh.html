<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Synchronize files using git over ssh | Kaiwen’s personal website</title>
<meta name="generator" content="Jekyll v3.10.0">
<meta property="og:title" content="Synchronize files using git over ssh">
<meta property="og:locale" content="en_US">
<meta name="description" content="I typically write model code on a consumer-grade laptop, and rsync the code to a remote server, where the model is trained. The price is that for every project, I have to write a script doing this job. Furthermore, rsync is not very smart in managing deleted files—it either deletes all extraneous files or keep all those files. While it’s probably not impossible to overcome the limitation by carefully reading the manual, delving into it would take tons of time as the manual contains over 19k words.">
<meta property="og:description" content="I typically write model code on a consumer-grade laptop, and rsync the code to a remote server, where the model is trained. The price is that for every project, I have to write a script doing this job. Furthermore, rsync is not very smart in managing deleted files—it either deletes all extraneous files or keep all those files. While it’s probably not impossible to overcome the limitation by carefully reading the manual, delving into it would take tons of time as the manual contains over 19k words.">
<link rel="canonical" href="https://kkew3.github.io/2025/05/05/sync-files-with-git-ssh.html">
<meta property="og:url" content="https://kkew3.github.io/2025/05/05/sync-files-with-git-ssh.html">
<meta property="og:site_name" content="Kaiwen’s personal website">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2025-05-05T03:48:55+00:00">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Synchronize files using git over ssh">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-05-05T03:48:55+00:00","datePublished":"2025-05-05T03:48:55+00:00","description":"I typically write model code on a consumer-grade laptop, and rsync the code to a remote server, where the model is trained. The price is that for every project, I have to write a script doing this job. Furthermore, rsync is not very smart in managing deleted files—it either deletes all extraneous files or keep all those files. While it’s probably not impossible to overcome the limitation by carefully reading the manual, delving into it would take tons of time as the manual contains over 19k words.","headline":"Synchronize files using git over ssh","mainEntityOfPage":{"@type":"WebPage","@id":"https://kkew3.github.io/2025/05/05/sync-files-with-git-ssh.html"},"url":"https://kkew3.github.io/2025/05/05/sync-files-with-git-ssh.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
<link type="application/atom+xml" rel="alternate" href="https://kkew3.github.io/feed.xml" title="Kaiwen's personal website">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2YQN8LEHLR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2YQN8LEHLR');
</script>
</head>
<body>
<header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/">Kaiwen's personal website</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
<a class="page-link" href="/tags/">Tags</a><a class="page-link" href="/docs/">Docs</a><a class="page-link" href="/about/">About</a>
</div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Synchronize files using git over ssh</h1>
    <span><a href="https://kkew3.github.io/tags/git"><code class="highlighter-rouge"><nobr>git</nobr></code></a></span>
    <p class="post-meta">
      <time class="dt-published" datetime="2025-05-05T03:48:55+00:00" itemprop="datePublished">May 5, 2025 at 03:48:55
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>I typically write model code on a consumer-grade laptop, and <code class="language-plaintext highlighter-rouge">rsync</code> the code to a remote server, where the model is trained.
The price is that for every project, I have to write a script doing this job.
Furthermore, <code class="language-plaintext highlighter-rouge">rsync</code> is not very smart in managing deleted files—it either deletes all extraneous files or keep all those files.
While it’s probably not impossible to overcome the limitation by carefully reading the <a href="https://linux.die.net/man/1/rsync">manual</a>, delving into it would take tons of time as the manual contains over 19k words.</p>

<p>Recently, I find that <code class="language-plaintext highlighter-rouge">git</code> over ssh can be used to resolve the isssue.
The procedure is simple.
Let us denote the remote server by <code class="language-plaintext highlighter-rouge">remote.server</code>, i.e. with an entry in <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> similar to:</p>

<pre><code class="language-sshconfig">Host remote.server
  User ubuntu
  HostName XXX.XXX.XXX.XXX
  IdentityFile ~/.ssh/id_rsa
</code></pre>

<p>On the local laptop:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /path/to/my_project
<span class="c"># We store the bare repo under ~/git/my_project.git.</span>
ssh remote.server <span class="s1">'git init --bare ~/git/my_project.git'</span>
<span class="c"># Setup remote over ssh.</span>
git remote add origin remote.server:~/git/my_project.git
git push <span class="nt">-u</span> origin master
</code></pre></div></div>

<p>On the remote server (if we are setting up from scratch):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /path/to/projects/dir
<span class="c"># Git clone local repo.</span>
git clone ~/git/my_project.git
</code></pre></div></div>

<p>On the remote server (if we already have an existing remote directory):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /path/to/my_project
<span class="nv">tmp</span><span class="o">=</span><span class="si">$(</span><span class="nb">mktemp</span> <span class="nt">-d</span> tmpXXXXXX<span class="si">)</span>
<span class="c"># Git clone local repo.</span>
git clone ~/git/my_project.git <span class="nv">$tmp</span>
<span class="c"># See https://stackoverflow.com/a/13852329/7881370.</span>
<span class="nb">mv</span> <span class="nv">$tmp</span>/.git .git
<span class="nb">rm</span> <span class="nt">-rf</span> <span class="nv">$tmp</span>
<span class="c"># Then resolve conflicts by referring to git status.</span>
<span class="c">#git status</span>
</code></pre></div></div>

<p>After this setup, for some further local updates, we just <code class="language-plaintext highlighter-rouge">git push</code> locally and <code class="language-plaintext highlighter-rouge">git pull</code> remotely.</p>

  </div>
<a class="u-url" href="/2025/05/05/sync-files-with-git-ssh.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Kaiwen's personal website</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Kaiwen's personal website</li>
<li><a class="u-email" href="mailto:kps6326@hotmail.com">kps6326@hotmail.com</a></li>
</ul>
      </div>

      <div class="footer-col footer-col-2">
<ul class="social-media-list"><li><a href="https://github.com/kkew3"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">kkew3</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>My blogs and research reports.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
